{% extends "base.html" %}

{% block title %}Extreme Metal Vocal Techniques DB with Spotify Popularity{% endblock %}

{% block content %}
<!-- Section: Welcome -->
<section class="section" xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html">
  <div class="card">
    <h1>The Extreme Metal Vocal Techniques Databases</h1>
    <p>A place with databases and analytical tools related to extreme metal vocal techniques.<br> More detailed information can be found in <i>About</i>.<br> Use <strong>Menu</strong> for navigation.</br></p>
  </div>
</section>

<!-- Section: Databases -->
<section class="section">
  <div class="card small">
    <h2>Available Databases</h2>
    <div class="db-links">
            <button class="db-button" onclick="showDescription('db3', this)">EMVT Database </button>
      <button class="db-button" onclick="showDescription('db1', this)">EMVT Examples DB </button>
    </div>
    <div id="dbDescription" class="dynamic-description"></div>
  </div>
</section>

<!-- Section: Spotify Popularity Analyzer-->
<section class="section">
  <div class="card">
    <h2>Spotty5 Popularity Analyzer</h2>
    <p>My intuitive web application for exploring the popularity metrics of an artist’s entire discography on Spotify. <br>Crafted with passion for both music and computers.</p>
  </div>
</section>

<!-- Section: Analytics -->
<section class="section">
  <div class="card">
    <h2>Analytics</h2>
    <p>Explore visual insights and correlations based on the data collected across all databases.</p>
  </div>
</section>
{% endblock %}

{% block scripts %}
<script>
  // Появление секций при скролле
  const sections = document.querySelectorAll(".section");
  const options = {
    threshold: 0.3
  };
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add("visible");
      }
    });
  }, options);
  sections.forEach(section => observer.observe(section));

  // Описание баз
  const descriptions = {
    db1: `<p><strong>Extreme Metal Vocal Techniques Examples Database with Spotify popularity metrics:</strong> <br>210 curated excerpts of metal songs with growling, screaming, and clean vocals. Contains Spotify popularity metrics. To be expanded to include 420 examples, adding the most popular Spotify releases by the same artists. <br>More information on the dataset can be found in <strong>About</strong> section.</br></p>`,
    db3: `<p><strong>Extreme Metal Vocal Techniques Database:</strong> <br>Studio recordings of five vocalists reproducing the same excerpts as in <strong>EMVT Examples Databes</strong>, but in different vocal techniques under controlled conditions. <br>To be completed by July 2025.</p>`
  };

  function showDescription(key, btn) {
    const desc = document.getElementById("dbDescription");
    desc.classList.remove("visible");
    setTimeout(() => {
      desc.innerHTML = descriptions[key];
      desc.classList.add("visible");
    }, 200);
    document.querySelectorAll('.db-button').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
  }


</script>
{% endblock %}
