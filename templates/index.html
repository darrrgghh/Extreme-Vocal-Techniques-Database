{% extends "base.html" %}

{% block title %}Extreme Metal Vocal Techniques DB with Spotify Popularity{% endblock %}

{% block content %}
<!-- Section: Welcome -->
<section class="section" xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html">
  <div class="card">
    <h1>The Extreme Metal Vocal Techniques Databases</h1>
    <p>This website contains several research databases and analytical tools related to<br>extreme metal vocal techniques.</br><br>Use "Menu" for navigation.</br></p>
  </div>
</section>

<!-- Section: Databases -->
<section class="section">
  <div class="card small">
    <h2>Available Databases</h2>
    <div class="db-links">
      <button class="db-button" onclick="showDescription('db1', this)">EMVT(+Spotify popularity)</button>
      <button class="db-button" onclick="showDescription('db2', this)">Extended Database</button>
      <button class="db-button" onclick="showDescription('db3', this)">Vocal Stimuli</button>
    </div>
    <div id="dbDescription" class="dynamic-description"></div>
  </div>
</section>

<!-- Section: Analytics -->
<section class="section">
  <div class="card">
    <h2>Analytics</h2>
    <p>Explore visual insights and correlations based on the data collected across all databases.</p>
  </div>
</section>
{% endblock %}

{% block scripts %}
<script>
  // Появление секций при скролле
  const sections = document.querySelectorAll(".section");
  const options = {
    threshold: 0.3
  };
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add("visible");
      }
    });
  }, options);
  sections.forEach(section => observer.observe(section));

  // Описание баз
  const descriptions = {
    db1: `<p><strong>Extreme Metal Vocal Techniques - Examples Database (+Spotify popularity):</strong> <br>210 curated excerpts of metal songs with growling, screaming, and clean vocals. Contains Spotify popularity metrics. To be expanded to include 420 examples, adding the most popular Spotify releases by the same artists.</br></p>`,
    db2: `<p><strong>Extreme Metal Vocal Examples Extended Database:</strong> <br>A larger collection (1000+ entries) of extreme vocal excerpts without popularity metrics. Under development.</p>`,
    db3: `<p><strong>Extreme Metal Vocal Techniques Database:</strong> <br>Studio recordings of five vocalists reproducing the same excerpts in different vocal techniques under controlled conditions. To be completed by July 2025.</p>`
  };

  function showDescription(key, btn) {
    const desc = document.getElementById("dbDescription");
    desc.classList.remove("visible");
    setTimeout(() => {
      desc.innerHTML = descriptions[key];
      desc.classList.add("visible");
    }, 200);
    document.querySelectorAll('.db-button').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
  }

  // Меню
  function toggleMenu() {
    const menu = document.getElementById('navLinks');
    menu.style.display = menu.style.display === 'flex' ? 'none' : 'flex';
  }

  window.onclick = function(event) {
    if (!event.target.closest('.menu-button')) {
      const menu = document.getElementById('navLinks');
      if (menu) menu.style.display = 'none';
    }
  }
</script>
{% endblock %}
